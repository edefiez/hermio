<header class="app-header">
    <div class="d-flex flex-grow-1 w-100 me-auto align-items-center">

        {# Mobile menu toggle #}
        <button class="mobile-menu-icon me-2 d-flex d-sm-flex d-md-flex d-lg-none flex-shrink-0" data-action="toggle-swap" data-toggleclass="app-mobile-menu-open" aria-label="{{ 'nav.toggle'|trans|default('Toggle Mobile Menu') }}">
            <svg class="sa-icon">
                <use href="/icons/sprite.svg#menu"></use>
            </svg>
        </button>

        {# Collapse icon for desktop #}
        <button type="button" class="collapse-icon me-3 d-none d-lg-inline-flex d-xl-inline-flex d-xxl-inline-flex" data-action="toggle" data-class="set-nav-minified" aria-label="{{ 'nav.toggle_size'|trans|default('Toggle Navigation Size') }}">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 5 8">
                <polygon fill="#878787" points="4.5,1 3.8,0.2 0,4 3.8,7.8 4.5,7 1.5,4" />
            </svg>
        </button>

    </div>

    {# Theme toggle #}
    <button type="button" class="btn btn-system" data-action="toggle-theme" aria-label="{{ 'nav.toggle_theme'|trans|default('Toggle Dark Mode') }}" aria-pressed="false">
        <svg class="sa-icon sa-icon-2x sa-mode-light">
            <use href="/icons/sprite.svg#sun"></use>
        </svg>
        <svg class="sa-icon sa-icon-2x sa-mode-dark">
            <use href="/icons/sprite.svg#moon"></use>
        </svg>
    </button>

    {# Language Selector #}
    <div class="dropdown d-inline-block">
        <button type="button" class="btn btn-system dropdown-toggle no-arrow" data-bs-toggle="dropdown" aria-expanded="false" aria-label="{{ 'nav.language'|trans|default('Language') }}">
            <svg class="sa-icon sa-icon-2x">
                <use href="/icons/sprite.svg#globe"></use>
            </svg>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
            <li>
                <a class="dropdown-item {% if app.request.locale == 'en' %}active{% endif %}" href="{{ path('app_change_locale', {'_locale': 'en'}) }}">
                    ðŸ‡¬ðŸ‡§ English
                </a>
            </li>
            <li>
                <a class="dropdown-item {% if app.request.locale == 'fr' %}active{% endif %}" href="{{ path('app_change_locale', {'_locale': 'fr'}) }}">
                    ðŸ‡«ðŸ‡· FranÃ§ais
                </a>
            </li>
        </ul>
    </div>

    {# Profile dropdown #}
    <button type="button" data-bs-toggle="dropdown" title="{{ app.user.email }}" class="btn-system bg-transparent d-flex flex-shrink-0 align-items-center justify-content-center" aria-label="{{ 'nav.profile'|trans|default('Open Profile Dropdown') }}">
        <svg class="sa-icon sa-icon-2x">
            <use href="/icons/sprite.svg#user"></use>
        </svg>
    </button>

    <div class="dropdown-menu dropdown-menu-animated dropdown-menu-end">
        <div class="notification-header rounded-top mb-2">
            <div class="d-flex flex-row align-items-center mt-1 mb-1 color-white">
                <span class="status status-success d-inline-block me-2">
                    <svg class="sa-icon">
                        <use href="/icons/sprite.svg#user"></use>
                    </svg>
                </span>
                <div class="info-card-text">
                    <div class="fs-lg text-truncate text-truncate-lg">{{ app.user.email }}</div>
                    {% if app.user.account %}
                        <span class="text-truncate text-truncate-md opacity-80 fs-sm">{{ app.user.account.planType.getDisplayName()|trans }}</span>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="dropdown-divider m-0"></div>

        <a href="{{ path('app_profile') }}" class="dropdown-item">
            <svg class="sa-icon me-2">
                <use href="/icons/sprite.svg#user"></use>
            </svg>
            <span>{{ 'header.user_menu.profile'|trans }}</span>
        </a>
        <a href="{{ path('app_account_index') }}" class="dropdown-item">
            <svg class="sa-icon me-2">
                <use href="/icons/sprite.svg#settings"></use>
            </svg>
            <span>{{ 'nav.account'|trans }}</span>
        </a>

        <div class="dropdown-divider m-0"></div>

        <a class="dropdown-item py-3 fw-500 d-flex justify-content-between" href="{{ path('app_logout') }}">
            <span class="text-danger">
                <svg class="sa-icon me-2">
                    <use href="/icons/sprite.svg#log-out"></use>
                </svg>
                {{ 'header.user_menu.logout'|trans }}
            </span>
        </a>
    </div>
</header>
