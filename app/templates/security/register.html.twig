{% extends 'auth/_base.html.twig' %}

{% block title %}{{ 'auth.register.title'|trans }} - Hermio{% endblock %}

{% block form_content %}
    {# Registration Form Title #}
    <h1 class="auth-form-title">{{ 'auth.register.title'|trans }}</h1>
    <p class="auth-form-subtitle">{{ 'auth.register.subtitle'|trans }}</p>

    {# Registration Form #}
    {{ form_start(registrationForm, {'attr': {'class': 'auth-form', 'novalidate': 'novalidate'}}) }}
        
        {# Email Field #}
        <div class="mb-3">
            {{ form_label(registrationForm.email, 'auth.register.email_label'|trans, {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(registrationForm.email, {
                'attr': {
                    'class': 'form-control' ~ (registrationForm.email.vars.errors|length > 0 ? ' is-invalid' : ''),
                    'placeholder': 'auth.register.email_placeholder'|trans,
                    'aria-describedby': 'email-help' ~ (registrationForm.email.vars.errors|length > 0 ? ' email-error' : '')
                }
            }) }}
            <small id="email-help" class="form-text text-muted visually-hidden">
                {{ 'auth.register.email_help'|trans }}
            </small>
            {% if registrationForm.email.vars.errors|length > 0 %}
                <div id="email-error" class="invalid-feedback" role="alert">
                    {{ form_errors(registrationForm.email) }}
                </div>
            {% endif %}
        </div>

        {# Password Field #}
        <div class="mb-3">
            {{ form_label(registrationForm.plainPassword.first, 'auth.register.password_label'|trans, {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(registrationForm.plainPassword.first, {
                'attr': {
                    'class': 'form-control' ~ (registrationForm.plainPassword.first.vars.errors|length > 0 ? ' is-invalid' : ''),
                    'placeholder': 'auth.register.password_placeholder'|trans,
                    'aria-describedby': 'password-help' ~ (registrationForm.plainPassword.first.vars.errors|length > 0 ? ' password-error' : '')
                }
            }) }}
            <small id="password-help" class="form-text text-muted visually-hidden">
                {{ 'auth.register.password_help'|trans }}
            </small>
            {% if registrationForm.plainPassword.first.vars.errors|length > 0 %}
                <div id="password-error" class="invalid-feedback" role="alert">
                    {{ form_errors(registrationForm.plainPassword.first) }}
                </div>
            {% endif %}
        </div>

        {# Confirm Password Field #}
        <div class="mb-3">
            {{ form_label(registrationForm.plainPassword.second, 'auth.register.confirm_password_label'|trans, {'label_attr': {'class': 'form-label'}}) }}
            {{ form_widget(registrationForm.plainPassword.second, {
                'attr': {
                    'class': 'form-control' ~ (registrationForm.plainPassword.second.vars.errors|length > 0 ? ' is-invalid' : ''),
                    'placeholder': 'auth.register.confirm_password_placeholder'|trans,
                    'aria-describedby': 'confirm-password-help' ~ (registrationForm.plainPassword.second.vars.errors|length > 0 ? ' confirm-password-error' : '')
                }
            }) }}
            <small id="confirm-password-help" class="form-text text-muted visually-hidden">
                {{ 'auth.register.confirm_password_help'|trans }}
            </small>
            {% if registrationForm.plainPassword.second.vars.errors|length > 0 %}
                <div id="confirm-password-error" class="invalid-feedback" role="alert">
                    {{ form_errors(registrationForm.plainPassword.second) }}
                </div>
            {% endif %}
        </div>

        {# Terms and Conditions Checkbox #}
        <div class="mb-3 form-check">
            {{ form_widget(registrationForm.agreeTerms, {
                'attr': {
                    'class': 'form-check-input' ~ (registrationForm.agreeTerms.vars.errors|length > 0 ? ' is-invalid' : '')
                }
            }) }}
            {{ form_label(registrationForm.agreeTerms, null, {'label_attr': {'class': 'form-check-label'}}) }}
            {% if registrationForm.agreeTerms.vars.errors|length > 0 %}
                <div class="invalid-feedback" role="alert">
                    {{ form_errors(registrationForm.agreeTerms) }}
                </div>
            {% endif %}
        </div>

        {# Submit Button #}
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-user-plus me-2"></i>
            {{ 'auth.register.submit'|trans }}
        </button>
    {{ form_end(registrationForm) }}

    {# Footer Links #}
    <div class="auth-form-footer">
        <p>{{ 'auth.register.have_account'|trans }}</p>
        <a href="{{ path('app_login') }}">{{ 'auth.register.login_link'|trans }}</a>
    </div>
{% endblock %}
